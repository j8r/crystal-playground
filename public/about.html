<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="/vendor/materialize-v0.97.5/css/materialize.min.css">
    <link rel="stylesheet" href="/vendor/CodeMirror-5.12.0/lib/codemirror.css">
    <link rel="stylesheet" href="/vendor/CodeMirror-5.12.0/theme/neat.css">
    <link rel="stylesheet" href="/vendor/octicons-3.5.0/octicons.css">
    <link rel="stylesheet" type="text/css" href="/application.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <title>Crystal Playground</title>
  </head>
  <body class="grey lighten-3 grey-text text-darken-2">
    <header>
      <div class="navbar-fixed">
        <nav>
          <div class="nav-wrapper white">
            <div class="col s12">
              <a href="/" class="brand-logo">
                <img src="icon.png" />
              </a>
              <ul class="right">
                <li><a href="/">Playground</a></li>
                <li><a href="/about.html">About</a></li>
                <li><a href="/settings.html"><span class="f-16 octicon octicon-settings"></span></a></li>
              </ul>
            </div>
            <div id="run-progress" class="progress">
              <div class="indeterminate"></div>
            </div>
          </div>
        </nav>
      </div>
    </header>

    <main>
      <div class="container">
        <h4>Source</h4>

        <p>
          Crystal Playground is developed together with Crystal Compiler.
        </p>

        <p>
          You can find the source code at <a href="https://github.com/crystal-lang/crystal/tree/master/src/compiler/crystal/tools/playground">https://github.com/crystal-lang/crystal/tree/master/src/compiler/crystal/tools/playground</a>.
        </p>

        <h4>Usage</h4>

<p>
Start typing code in the editor. When you stop typing or click the green button the code will be compiler, executed. Go ahead, try it!
</p>

<pre class="playground">
a = 1
b = 3</pre>

<p>
As you can see, some values appeared on the side. These are the values that each line generates.
</p>

<p>
When a program prints, like using <code>puts</code>, the output is visible in the bottom panel.
</p>

<pre class="playground">
s = "Lorem ipsum"
puts s</pre>

<p>
In the main playground, this is hidden by default and will appear when <span class="octicon octicon-terminal teal-text"></span> is pressed. Since the sidebar will likely show all the needed information you won't need this output all the time.
</p>

<p>
Loops, functions, classes, sleeps and the whole language is available. When a line is executed multiple times, all the produced values are collected and can be inspected in a table.
</p>

<pre class="playground">
def sample(n)
  res = [] of Float64
  n.times do
    res << rand
  end
  res
end

sample 5</pre>

<p>
As you can use all standard library. Seriously. Run the next sample and <a href="http://0.0.0.0:5678" target="_blank">click here <span class="octicon octicon-link-external"></span></a>. Once you finish you can stop the long running process with the stop button. That will kill the process, hence display an exit status and a <span class="octicon octicon-terminal red-text"></span>.
</p>

<pre class="playground">
require "http/server"

server = HTTP::Server.new "0.0.0.0", 5678 do |context|
  context.response.headers["Content-Type"] = "text/plain"
  context.response.print("Hello world!")
end

puts "Listening on http://0.0.0.0:5678"
server.listen</pre>

<p>
When <code>crystal play</code> is run from your awesome Crystal app or shard you are ablet o use <code>require</code> as you would normaly do: require relative files and even dependencies declared in your <code>shards.yml</code>.
</p>

<p>
In loops it sometimes is usefull to inspect the values of multiple variables. Tuple literals are handy for this since each element of the tuple will appear in a different column in the table.
</p>

<pre class="playground">
(1..100).each do |i|
  r = case {i % 3 == 0, i % 5 == 0}
  when {true, true}
    "FizzBuzz"
  when {true, _}
    "Fizz"
  when {_, true}
    "Buzz"
  else
    i
  end

  {i, r, i % 3, i % 5}
end
</pre>

        <h4>Load, Store and Share</h4>

<div class="row">
  <div class="col s8">
    <p>
    In the playground your code is persisted in every stroke and before you close or refresh. It is persisted in both <code>SessionStore</code> and <code>LocalStore</code> if available. This means that next time you open the playground the code will still be there!
    </p>

    <p>
    You are able to save the current code as a file and even share it as a gist from the action buttons in the bottom right corner.
    </p>

    <p>
    For loading a Crystal <code>.cr</code> file, just drag and drop it anywhere in the playground.
    </p>
  </div>
  <div class="col s4 center-align">
    <div>
      <div>
        <ul>
          <li style="padding-bottom: 14px;">
            <a class="btn-floating btn grey darken-1" href="javascript:">
              <span class="octicon octicon-mark-github"></span>
            </a>
          </li>
          <li>
            <a class="btn-floating btn red darken-1" href="javascript:">
              <span class="octicon octicon-desktop-download"></span>
            </a>
          </li>
        </ul>
        <a class="run-button btn-floating btn-large waves-effect waves-light" href="javascript:">
          <span class="mega-octicon octicon-triangle-right"></span>
        </a>
      </div>
    </div>
  </div>
</div>

        <h4>Credits</h4>

        <p>
          The following libraries are used in Crystal Playground.
        </p>

        <ul>
          <li><a href="//materializecss.com">Materialize</a></li>
          <li><a href="//codemirror.net">CodeMirror</a></li>
          <li><a href="//octicons.github.com">GitHub Octicons</a></li>
          <li><a href="//jquery.com">jQuery</a></li>
        </ul>

        <p>
          Thanks for all the hard work!
        </p>
      </div>
    </main>

    <footer>
      <div class="footer-copyright">
        <div class="center-align">Happy Crystalling â™¥</div>
      </div>
    </footer>

    <script src="/vendor/jquery-2.2.1.min.js"></script>
    <script src="/vendor/materialize-v0.97.5/js/materialize.min.js"></script>
    <script src="/vendor/CodeMirror-5.12.0/lib/codemirror.js"></script>
    <script src="/vendor/CodeMirror-5.12.0/addon/comment/comment.js"></script>
    <script src="/vendor/CodeMirror-5.12.0/mode/crystal/crystal.js"></script>
    <script type="text/javascript" src="/settings.js"></script>
    <script type="text/javascript" src="/session.js"></script>
    <script type="text/javascript" src="/application.js"></script>
  </body>
</html>
